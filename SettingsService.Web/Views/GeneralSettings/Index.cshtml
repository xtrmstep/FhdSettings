@using SettingsService.Web.Properties
@section Scripts {
    @Scripts.Render("~/bundles/general-settings")
    <script>
        var settingsViewModel = new SettingsViewModel([]);
        var hostsViewModel = new HostsViewModel([]);
        var rulesViewModel = new RulesViewModel([
            new Rule("1", "Item1", "Video", "expression1"),
            new Rule("2", "Item2", "Picture", "expression2")
        ]);
        var settingsApi = new SettingsApi("@Settings.Default.SettingServiceUrl", settingsViewModel);
        var hostsApi = new HostsApi("@Settings.Default.SettingServiceUrl", hostsViewModel);
        var rulesApi = new RulesApi("@Settings.Default.SettingServiceUrl", rulesViewModel);

        $(function () {
            settingsApi.load();
            hostsApi.load();
            rulesApi.load();
            ko.applyBindings(settingsViewModel, document.getElementById("settings"));
            ko.applyBindings(hostsViewModel, document.getElementById("hosts"));
            ko.applyBindings(rulesViewModel, document.getElementById("rules"));
        });
    </script>
}
@Html.Partial("_Settings")
@Html.Partial("_Hosts")
@Html.Partial("_Rules")